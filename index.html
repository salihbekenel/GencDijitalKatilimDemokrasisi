<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GençDijitalKatılımDemokrasisi</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        .karar {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            background: #fff;
        }
        .karar-baslik {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .karar-no {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        .karar-ozet {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .oy-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .btn-evet {
            background-color: #27ae60;
            color: white;
        }
        .btn-hayir {
            background-color: #e74c3c;
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
        }
        .istatistik {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .istatistik-bar {
            display: flex;
            height: 25px;
            margin: 5px 0;
            border-radius: 5px;
            overflow: hidden;
        }
        .evet-bar {
            background-color: #27ae60;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .hayir-bar {
            background-color: #e74c3c;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .sayfa-button {
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>GençDijitalKatılımDemokrasisi</h1>
        <p>Belediye kararlarını oyla, fikrini söyle!</p>

        <div id="kararlar-container">
            
        </div>

        <div class="sayfa-button">
            <button id="onceki-sayfa" onclick="oncekiSayfa()">← Önceki</button>
            <span id="sayfa-bilgisi">Sayfa 1</span>
            <button id="sonraki-sayfa" onclick="sonrakiSayfa()">Sonraki →</button>
        </div>
    </div>

    <script>
        
        const kararlar = [
            {
                id: 1,
                kararNo: "2024/15",
                baslik: "Küçükyalı Sahil Yolu Projesi: Araç Şeridi Yerine Bisiklet Yolu ve Yürüyüş Parkuru",
                ozet: "Maltepe Belediyesi, Küçükyalı sahil yolundaki iki araç şeridini kaldırarak, yerine ayrılmış bisiklet yolu, yürüyüş parkuru ve dinlenme alanları yapmayı planlıyor. Amaç: trafik yoğunluğunu azaltmak, vatandaşlara sağlıklı yaşam alanı oluşturmak."
            },
            {
                id: 2,
                kararNo: "2024/22",
                baslik: "\"MaltepeGençLAB\" Açılışı: Ücretsiz Kodlama ve Dijital Tasarım Atölyeleri",
                ozet: "Belediye, Zübeyde Hanım Gençlik Merkezi'nde gençlere yönelik ücretsiz yazılım geliştirme (Python, Web Tasarım), 3B modelleme ve oyun geliştirme atölyeleri açma kararı aldı. Bütçe: 1.5 Milyon TL."
            },
            {
                id: 3,
                kararNo: "2024/18",
                baslik: "Maltepe İlçesine Yeni Elektrikli Belediye Otobüsü Seferleri",
                ozet: "Çevre kirliliğini azaltmak amacıyla, M5 hattına (Marmaray Bağlantı Yolu) entegre, 10 adet yeni elektrikli otobüs alınacak ve ücretsiz olarak hizmete sunulacak."
            },
            {
                id: 4,
                kararNo: "2024/09",
                baslik: "Türkan Saylan Kültür Merkezi'nde Üniversiteli Gençlere %50 İndirim",
                ozet: "Tiyatro, sinema gösterimi ve konser etkinliklerinde, 18-25 yaş aralığındaki üniversite öğrencilerine biletlerde %50 indirim uygulanması kararlaştırıldı."
            },
            {
                id: 5,
                kararNo: "2024/30",
                baslik: "Cumartesi Günleri Araç Girişine Kapatılan \"Maltepe Sokakları\" Projesi",
                ozet: "Her cumartesi 09:00-19:00 saatleri arasında, seçilecek 3 cadde araç trafiğine kapatılarak; vatandaşların yürüyüş, sokak oyunları ve açık hava etkinlikleri yapabileceği bir alana dönüştürülecek."
            }
        ];

        let mevcutSayfa = 1;
        const sayfaBasinaKarar = 2;

      
        document.addEventListener('DOMContentLoaded', function() {
            kararlariYukle();
            sayfaGoster();
        });

        function kararlariYukle() {
            
            kararlar.forEach(karar => {
                if (!localStorage.getItem(`karar_${karar.id}`)) {
                    localStorage.setItem(`karar_${karar.id}`, JSON.stringify({
                        evet: 0,
                        hayir: 0
                    }));
                }
            });
        }

        function sayfaGoster() {
            const container = document.getElementById('kararlar-container');
            container.innerHTML = '';

            const baslangic = (mevcutSayfa - 1) * sayfaBasinaKarar;
            const bitis = baslangic + sayfaBasinaKarar;
            const sayfaKararlari = kararlar.slice(baslangic, bitis);

            sayfaKararlari.forEach(karar => {
                const oyData = JSON.parse(localStorage.getItem(`karar_${karar.id}`));
                const toplamOy = oyData.evet + oyData.hayir;
                const evetYuzde = toplamOy > 0 ? (oyData.evet / toplamOy * 100).toFixed(1) : 0;
                const hayirYuzde = toplamOy > 0 ? (oyData.hayir / toplamOy * 100).toFixed(1) : 0;

                const kararHTML = `
                    <div class="karar">
                        <div class="karar-no">Karar No: ${karar.kararNo}</div>
                        <div class="karar-baslik">${karar.baslik}</div>
                        <div class="karar-ozet">${karar.ozet}</div>
                        <div class="oy-buttons">
                            <button class="btn btn-evet" onclick="oyVer(${karar.id}, 'evet')">✅ KATILIYORUM</button>
                            <button class="btn btn-hayir" onclick="oyVer(${karar.id}, 'hayir')">❌ KATILMIYORUM</button>
                        </div>
                        <div class="istatistik">
                            <strong>İstatistikler:</strong>
                            <div class="istatistik-bar">
                                <div class="evet-bar" style="width: ${evetYuzde}%">
                                    ${evetYuzde}% EVET (${oyData.evet} oy)
                                </div>
                                <div class="hayir-bar" style="width: ${hayirYuzde}%">
                                    ${hayirYuzde}% HAYIR (${oyData.hayir} oy)
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += kararHTML;
            });

            document.getElementById('sayfa-bilgisi').textContent = `Sayfa ${mevcutSayfa}`;
            document.getElementById('onceki-sayfa').disabled = mevcutSayfa === 1;
            document.getElementById('sonraki-sayfa').disabled = mevcutSayfa === Math.ceil(kararlar.length / sayfaBasinaKarar);
        }

        function oyVer(kararId, oy) {
            const oyData = JSON.parse(localStorage.getItem(`karar_${kararId}`));
            oyData[oy]++;
            localStorage.setItem(`karar_${kararId}`, JSON.stringify(oyData));
            
            alert(`Teşekkürler! ${kararId} numaralı karar için oyunuz kaydedildi.`);
            sayfaGoster(); // İstatistikleri güncelle
        }

        function oncekiSayfa() {
            if (mevcutSayfa > 1) {
                mevcutSayfa--;
                sayfaGoster();
            }
        }

        function sonrakiSayfa() {
            if (mevcutSayfa < Math.ceil(kararlar.length / sayfaBasinaKarar)) {
                mevcutSayfa++;
                sayfaGoster();
            }
        }
    </script>
</body>
</html>